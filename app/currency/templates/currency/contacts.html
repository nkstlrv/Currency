{%extends 'currency/base.html'%} 
{% load static %} 
{% block css %}
<link rel="stylesheet" href="{% static 'currency/css/contacts.css' %}" />
{% endblock%} 

{% block content %}

<div class="header">
  <h1>Contacts Table</h1>
</div>

{% if contacts|length > 0 %}

<div class="table-div">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Email</th>
        <th scope="col">Subject</th>
        <th scope="col">Message</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      {% for contact in contacts %}

      <tr>
        <th scope="row">{{contact.id}}</th>
        <td>{{contact.email_from}}</td>
        <td>{{contact.subject}}</td>
        {% if contact.message|length > 20 %}
        <td>{{contact.message|slice:":20"}}...</td>
        {% else %}
        <td>{{contact.message}}</td>
        {% endif %}
        <td>
            <div>
          <a class="edit" href="{% url 'contact_update' contact.id%}">Edit</a>
          <base>|</base>
          <a class="delete" href="{% url 'contact_delete' contact.id%}">Delete</a>
        </div>
        </td>
      </tr>

      {% endfor %}
    </tbody>
  </table>
</div>

{% else %}

<div class="alert alert-info" role="alert">Table is empty</div>

{% endif %} 

<a href="{% url 'contact_create' %}"><button type="button" id="new-contact" class="btn btn-primary btn-lg">
    Create Contact
</button></a>

{%endblock content%}
